<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Ø¢Ø®Ø±ÛŒÙ† Ø§Ø®Ø¨Ø§Ø±</title>

	<!-- Bootstrap 5 (modern) -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

	<!-- Font (optional but nice for Persian) -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;800&display=swap" rel="stylesheet">
</head>

<body>
  <!-- Header -->
  <header class="app-header">
	<div class="container py-3">
	  	<div class="d-flex align-items-center justify-content-between gap-3 flex-wrap">
			<div class="brand">
				<div class="brand-badge">ğŸ“°</div>
				<div class="brand-text">
					<div class="brand-title rtl-text" dir="rtl">Ø®Ø¨Ø±Ø®ÙˆØ§Ù† RSS</div>
					<div class="brand-subtitle">Flask</div>
				</div>
			</div>

			<div class="header-actions d-flex align-items-center gap-2">
				{% if request.args.get('refreshed') %}
				<div class="alert alert-success rtl-text mb-0 p-2" dir="rtl">
				Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ âœ…
				</div>
				{% endif %}
				<form id="searchForm" class="search-wrap" method="get" action="{{ url_for('home') }}">
					<span class="search-icon">âŒ•</span>
					<input id="searchBar" name="q" class="search-input rtl-text" dir="rtl" type="text" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø®Ø¨Ø±Ù‡Ø§..." value="{{ q }}" autocomplete="off"/>
					<input type="hidden" name="page" value="1" />
				</form>
				<button id="themeBtn" class="btn theme-btn" type="button" title="Toggle theme">
					<span id="themeIcon">ğŸŒ™</span>
				</button>
				<a class="btn btn-accent" href="{{ url_for('refresh', page=page, q=q) }}">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙÛŒØ¯</a>
			</div>
	  	</div>
	</div>
  </header>

  <!-- Main -->
  	<main class="container py-4">
		<div class="top-row d-flex align-items-center justify-content-between flex-wrap gap-2">
			<div class="rtl-text" dir="rtl">
				<h2 class="page-title mb-1">Ø¢Ø®Ø±ÛŒÙ† Ø®Ø¨Ø±Ù‡Ø§</h2>
				<div class="page-hint">Ø¨Ø±Ø§ÛŒ Ù‡Ø± ØµÙØ­Ù‡ 9 Ø®Ø¨Ø± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
			</div>
			
			<div class="pill rtl-text" dir="rtl">
				ØµÙØ­Ù‡ <strong>{{ page }}</strong> Ø§Ø² <strong>{{ total_pages }}</strong>
			</div>
				
		</div>

	<!-- Grid -->
	<div id="newsGrid" class="news-grid mt-3">
	  {% for item in news %}
	  <article class="news-card"
			   data-title="{{ item[1] | lower }}"
			   data-desc="{{ (item[3] | striptags) | lower }}">
		<div class="news-card-body">
		  <div class="news-meta">
			<span class="dot"></span>
			<span class="meta-text">RSS item</span>
		  </div>

		  <h3 class="news-title rtl-text" dir="rtl">
			{{ item[1] }}
		  </h3>

		  <p class="news-desc rtl-text" dir="rtl">
			{{ item[3] | striptags | truncate(100, True, '...') }}
		  </p>

		  <div class="news-actions">
			<a class="btn btn-accent" href="{{ item[2] }}" target="_blank" rel="noopener">
			  Ø§Ø¯Ø§Ù…Ù‡ Ù…Ø·Ù„Ø¨
			  <span class="arrow">â†—</span>
			</a>

			<button class="btn btn-ghost copyBtn" type="button" data-link="{{ item[2] }}">
			  Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú©
			</button>
		  </div>
		</div>
	  </article>
	  {% endfor %}
	</div>

	<div class="pagination-wrap mt-4">
	  <nav aria-label="Pagination">
		<ul class="pagination pagination-modern justify-content-center mb-0">
		  {% if page > 1 %}
			<li class="page-item">
			  <a class="page-link" href="{{ url_for('home', page=page-1, q=q) }}" aria-label="Previous">â€¹</a>
			</li>
		  {% else %}
			<li class="page-item disabled"><span class="page-link">â€¹</span></li>
		  {% endif %}

		  	{% for p in pagination %}
				{% if p is none %}
				<li class="page-item disabled"><span class="page-link">â€¦</span></li>
				{% else %}
					<li class="page-item {% if p == page %}active{% endif %}">
					<a class="page-link" href="{{ url_for('home', page=p, q=q) }}">{{ p }}</a>
					</li>
				{% endif %}
			{% endfor %}

		  {% if page < total_pages %}
			<li class="page-item">
			  <a class="page-link" href="{{ url_for('home', page=page+1, q=q) }}" aria-label="Next">â€º</a>
			</li>
		  {% else %}
			<li class="page-item disabled"><span class="page-link">â€º</span></li>
		  {% endif %}
		</ul>
	  </nav>
	</div>

		<footer class="app-footer rtl-text" dir="rtl">
			Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ Flask â€¢
			<br><a class="page-link" href="https://khabarfarsi.com/rss/top" target="_blank">RSS: https://khabarfarsi.com/rss/top </a>
		</footer>
  	</main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom JS -->
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
